# Camera intrinsic parameters configuration file (YAML format)
# For 1920x1536 resolution fisheye camera
#
# Calibrated using ROS2 camera_calibration with fisheye mode:
#   ros2 run camera_calibration cameracalibrator \
#     --size 8x6 --square 0.025 \
#     --fisheye-recompute-extrinsicsts --fisheye-fix-skew \
#     --ros-args --remap image:=/image_raw --remap camera:=/v4l2_camera
#
# ============================================================
# FISHEYE UNDISTORTION (鱼眼畸变矫正)
# ============================================================
# To enable fisheye undistortion, use:
#   ENABLE_UNDISTORTION=1 CAMERA_INFO_FILE=camera_info_example.yaml ./run_camera_depth.sh
#
# Or with balance parameter (0.0=crop to valid pixels, 1.0=full FOV):
#   ENABLE_UNDISTORTION=1 UNDISTORTION_BALANCE=0.5 CAMERA_INFO_FILE=camera_info_example.yaml ./run_camera_depth.sh
# ============================================================

# Image resolution
image_width: 640
image_height: 480

# Camera intrinsic parameters from calibration
# fx, fy: focal length
# cx, cy: principal point (optical center)
fx: 465.321303
fy: 466.557484
cx: 303.131049
cy: 276.938277

# Distortion model: "fisheye" for OpenCV fisheye model (equidistant)
# The fisheye model uses 4 coefficients: k1, k2, k3, k4
# Note: ROS calibration outputs 5 values, but fisheye only uses first 4
distortion_model: "fisheye"

# Fisheye distortion coefficients from calibration
# D = [-0.115553639350703, 0.007595416258533867, 0.00022984137433380847, 0.0049344122399893765, 0.0]
# D =  [-0.3222186725870301, 0.10079661819432836, -0.0064427500403842295, 0.00046307332398568343, 0.0]
k1: -0.3222186725870301
k2: 0.10079661819432836
k3: -0.0064427500403842295
k4: 0.00046307332398568343

# For backward compatibility (p1, p2 mapped to k3, k4)
p1: -0.0064427500403842295
p2: 0.0049344122399893765

# Camera matrix (3x3)
camera_matrix:
  rows: 3
  cols: 3
  data: [465.321303, 0.000000, 303.131049,
0.000000, 466.557484, 276.938277,
0.000000, 0.000000 ,1.000000,
]

# Distortion coefficients (fisheye model: k1, k2, k3, k4)
distortion_coefficients:
  rows: 1
  cols: 4
  data: [-0.322219, 0.100797 ,-0.006443 ,0.000463 ,0.000000]

# Rectification matrix (identity for monocular camera)
rectification_matrix:
  rows: 3
  cols: 3
  data: [1.0, 0.0, 0.0, 0.0, 1.0, 0.0, 0.0, 0.0, 1.0]

# Projection matrix (3x4) from calibration
projection_matrix:
  rows: 3
  cols: 4
  data: [383.44070179466456, 0.0, 296.7347808749214, 0.0, 0.0, 421.64720784936344, 281.5277228146432, 0.0, 0.0, 0.0, 1.0, 0.0]
  
  

